# LaoBa é¡¹ç›®å¼€å‘èŒƒå¼

> ğŸ“˜ æœ¬æ–‡æ¡£è¯´æ˜é¡¹ç›®çš„ä»£ç ç»„ç»‡æ–¹å¼å’Œæ·»åŠ æ–°é¡µé¢çš„æµç¨‹

---

## é¡¹ç›®ç®€ä»‹

**LaoBa** æ˜¯ä¸€ä¸ªæ ¡å›­ç”Ÿæ´»äº¤äº’å¹³å°ã€‚

**æŠ€æœ¯æ ˆ**ï¼šVue 3 + TypeScript + Pinia + Element Plus + Vue Router

---

## æ ¸å¿ƒç›®å½•ç»“æ„

```
LaoBa/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts                   # é¡¹ç›®å…¥å£
â”‚   â”œâ”€â”€ App.vue                   # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ routes.ts                 # è·¯ç”±æ€»é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                      # ã€å…¨å±€ã€‘æ¥å£è¯·æ±‚å°è£…
â”‚   â”‚   â”œâ”€â”€ client.ts             # Axios å°è£…
â”‚   â”‚   â”œâ”€â”€ config.ts             # API é…ç½®
â”‚   â”‚   â””â”€â”€ types.ts              # æ¥å£ç±»å‹å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                    # ã€é¡µé¢ç›®å½•ã€‘æ¯ä¸ªé¡µé¢ä¸€ä¸ªæ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ routes.ts             # é¡µé¢è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ home/                 # ç¤ºä¾‹ï¼šé¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ login/                # ç¤ºä¾‹ï¼šç™»å½•é¡µ
â”‚   â”‚   â””â”€â”€ user/                 # ç¤ºä¾‹ï¼šç”¨æˆ·é¡µ
â”‚   â”‚
â”‚   â”œâ”€â”€ components/               # ã€å…¨å±€ã€‘å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ index.vue             # Layout ä¸»å¸ƒå±€
â”‚   â”‚   â””â”€â”€ layout/               # å¸ƒå±€ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                   # ã€å…¨å±€ã€‘Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ user.ts               # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚
â”‚   â””â”€â”€ composables/              # ã€å…¨å±€ã€‘å¯å¤ç”¨ä¸šåŠ¡é€»è¾‘
â”‚       â””â”€â”€ use-user.ts           # ç”¨æˆ·ç›¸å…³é€»è¾‘
â”‚
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts
```

### ğŸ“‚ å…¨å±€ vs é¡µé¢çº§

| ç±»å‹ | ç›®å½•ä½ç½® | ä½œç”¨èŒƒå›´ |
|------|----------|----------|
| **å…¨å±€** | `src/api/`ã€`src/stores/`ã€`src/composables/`ã€`src/components/` | å¤šä¸ªé¡µé¢å…±äº« |
| **é¡µé¢çº§** | `src/pages/xxx/` å†…éƒ¨ | åªå±äºæŸä¸ªé¡µé¢ |

---

## é¡µé¢çº§ç›®å½•ç»“æ„ï¼ˆé‡ç‚¹ï¼‰

ä»¥ `src/pages/home/` ä¸ºä¾‹ï¼Œå±•ç¤ºå®Œæ•´çš„é¡µé¢çº§ä»£ç ç»„ç»‡ï¼š

```
src/pages/home/
â”œâ”€â”€ index.vue              # ã€å¿…éœ€ã€‘é¡µé¢å…¥å£ç»„ä»¶
â”œâ”€â”€ api.ts                 # ã€å¯é€‰ã€‘è¯¥é¡µé¢ä¸“ç”¨çš„æ¥å£è°ƒç”¨
â”œâ”€â”€ const.ts               # ã€å¯é€‰ã€‘è¯¥é¡µé¢çš„å¸¸é‡é…ç½®
â”œâ”€â”€ utils.ts               # ã€å¯é€‰ã€‘è¯¥é¡µé¢çš„å·¥å…·å‡½æ•°
â”œâ”€â”€ components/            # ã€å¯é€‰ã€‘è¯¥é¡µé¢ä¸“ç”¨çš„å­ç»„ä»¶
â”‚   â”œâ”€â”€ post-card.vue
â”‚   â””â”€â”€ comment-list.vue
â”œâ”€â”€ stores/                # ã€å¯é€‰ã€‘è¯¥é¡µé¢ä¸“ç”¨çš„çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ feed.ts
â””â”€â”€ composables/           # ã€å¯é€‰ã€‘è¯¥é¡µé¢ä¸“ç”¨çš„ä¸šåŠ¡é€»è¾‘
    â””â”€â”€ use-feed.ts
```

### æ¯ä¸ªæ–‡ä»¶çš„ä½œç”¨

| æ–‡ä»¶/ç›®å½• | ä½œç”¨ | ç¤ºä¾‹å†…å®¹ |
|-----------|------|----------|
| `index.vue` | é¡µé¢ä¸»ç»„ä»¶ï¼ˆå¿…éœ€ï¼‰ | é¡µé¢çš„ HTML ç»“æ„å’Œä¸»è¦é€»è¾‘ |
| `api.ts` | è¯¥é¡µé¢çš„æ¥å£è°ƒç”¨ | `fetchPostList()`, `likePost()` |
| `const.ts` | è¯¥é¡µé¢çš„å¸¸é‡ | `POST_TYPE = { NORMAL: 1, VIDEO: 2 }` |
| `utils.ts` | è¯¥é¡µé¢çš„å·¥å…·å‡½æ•° | `formatPostTime()`, `parseContent()` |
| `components/` | è¯¥é¡µé¢çš„å­ç»„ä»¶ | `post-card.vue`ï¼ˆåŠ¨æ€å¡ç‰‡ç»„ä»¶ï¼‰ |
| `stores/` | è¯¥é¡µé¢çš„çŠ¶æ€ç®¡ç† | ç®¡ç†åŠ¨æ€åˆ—è¡¨ã€ç­›é€‰æ¡ä»¶ç­‰çŠ¶æ€ |
| `composables/` | è¯¥é¡µé¢çš„ä¸šåŠ¡é€»è¾‘ | `use-feed.ts`ï¼ˆè·å–åŠ¨æ€åˆ—è¡¨é€»è¾‘ï¼‰ |

---

## å¦‚ä½•æ·»åŠ æ–°é¡µé¢

### å®Œæ•´ç¤ºä¾‹ï¼šæ·»åŠ "åŠ¨æ€è¯¦æƒ…é¡µ"

#### ç¬¬ 1 æ­¥ï¼šåˆ›å»ºé¡µé¢æ–‡ä»¶å¤¹

```bash
# åœ¨ src/pages/ ä¸‹åˆ›å»ºæ–°æ–‡ä»¶å¤¹
src/pages/post-detail/
```

#### ç¬¬ 2 æ­¥ï¼šåˆ›å»º index.vueï¼ˆå¿…éœ€ï¼‰

`src/pages/post-detail/index.vue`

```vue
<template>
  <div class="post-detail">
    <h1>åŠ¨æ€è¯¦æƒ…</h1>
    <p>åŠ¨æ€ ID: {{ postId }}</p>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';
import { useRoute } from 'vue-router';

const route = useRoute();
const postId = ref(route.params.id);
</script>

<style scoped>
.post-detail {
  padding: 20px;
}
</style>
```

#### ç¬¬ 3 æ­¥ï¼šæ³¨å†Œè·¯ç”±ï¼ˆå¿…éœ€ï¼‰

ä¿®æ”¹ `src/pages/routes.ts`ï¼š

```typescript
import type { RouteRecordRaw } from 'vue-router';

export const routes = [
    {
        path: 'home',
        component: () => import('@/pages/home/index.vue'),
    },
    {
        path: 'user',
        component: () => import('@/pages/user/index.vue'),
    },
    // ğŸ‘‡ æ–°å¢è·¯ç”±
    {
        path: 'post/:id',  // å¸¦å‚æ•°çš„è·¯ç”±
        component: () => import('@/pages/post-detail/index.vue'),
    },
] as RouteRecordRaw[];
```

#### ç¬¬ 4 æ­¥ï¼šæ ¹æ®éœ€è¦æ·»åŠ å…¶ä»–æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰

å¦‚æœé¡µé¢é€»è¾‘å¤æ‚ï¼Œå¯ä»¥æ·»åŠ ï¼š

**`src/pages/post-detail/api.ts`** - æ¥å£è°ƒç”¨

```typescript
import { apiClient } from '@/api/client';

// è·å–åŠ¨æ€è¯¦æƒ…
export async function getPostDetail(id: string) {
  return apiClient.get(`/posts/${id}`);
}

// è·å–è¯„è®ºåˆ—è¡¨
export async function getComments(postId: string) {
  return apiClient.get(`/posts/${postId}/comments`);
}
```

**`src/pages/post-detail/composables/use-post-detail.ts`** - ä¸šåŠ¡é€»è¾‘

```typescript
import { ref } from 'vue';
import { getPostDetail, getComments } from '../api';

export function usePostDetail(postId: string) {
  const post = ref(null);
  const comments = ref([]);
  const isLoading = ref(false);

  async function loadData() {
    isLoading.value = true;
    try {
      post.value = await getPostDetail(postId);
      comments.value = await getComments(postId);
    } finally {
      isLoading.value = false;
    }
  }

  return { post, comments, isLoading, loadData };
}
```

**`src/pages/post-detail/components/comment-item.vue`** - å­ç»„ä»¶

```vue
<template>
  <div class="comment-item">
    <el-avatar :src="comment.avatar" />
    <div class="content">
      <div class="nickname">{{ comment.nickname }}</div>
      <div class="text">{{ comment.content }}</div>
    </div>
  </div>
</template>

<script setup lang="ts">
defineProps<{
  comment: any
}>();
</script>
```

**åœ¨ `index.vue` ä¸­ä½¿ç”¨**

```vue
<template>
  <div class="post-detail" v-loading="isLoading">
    <div v-if="post">
      <h1>{{ post.title }}</h1>
      <p>{{ post.content }}</p>
    </div>

    <div class="comments">
      <CommentItem 
        v-for="item in comments" 
        :key="item.id" 
        :comment="item" 
      />
    </div>
  </div>
</template>

<script setup lang="ts">
import { useRoute } from 'vue-router';
import { usePostDetail } from './composables/use-post-detail';
import CommentItem from './components/comment-item.vue';

const route = useRoute();
const postId = route.params.id as string;

const { post, comments, isLoading, loadData } = usePostDetail(postId);

loadData();
</script>
```

---

## ä½•æ—¶ä½¿ç”¨"é¡µé¢çº§"è¿˜æ˜¯"å…¨å±€"ï¼Ÿ

### ä½¿ç”¨é¡µé¢çº§ï¼ˆ`src/pages/xxx/` å†…éƒ¨ï¼‰

- âœ… ä»£ç **åªåœ¨è¿™ä¸ªé¡µé¢ç”¨**
- âœ… é€»è¾‘å’Œè¯¥é¡µé¢å¼ºå…³è”
- âœ… å…¶ä»–é¡µé¢ä¸éœ€è¦è¿™äº›åŠŸèƒ½

**ç¤ºä¾‹**ï¼š
- `src/pages/home/components/post-card.vue` - é¦–é¡µçš„åŠ¨æ€å¡ç‰‡
- `src/pages/user/api.ts` - ç”¨æˆ·é¡µçš„æ¥å£

### ä½¿ç”¨å…¨å±€ï¼ˆ`src/api/`ã€`src/stores/` ç­‰ï¼‰

- âœ… ä»£ç **åœ¨å¤šä¸ªé¡µé¢å¤ç”¨**
- âœ… é€šç”¨çš„ä¸šåŠ¡é€»è¾‘æˆ–ç»„ä»¶
- âœ… å…¨å±€å…±äº«çš„çŠ¶æ€

**ç¤ºä¾‹**ï¼š
- `src/stores/user.ts` - å…¨å±€ç”¨æˆ·çŠ¶æ€ï¼ˆå¤šé¡µé¢éœ€è¦ï¼‰
- `src/api/client.ts` - é€šç”¨çš„ Axios å°è£…
- `src/components/layout/` - å…¨å±€å¸ƒå±€ç»„ä»¶

---

## å¼€å‘æµç¨‹æ€»ç»“

### æ·»åŠ ç®€å•é¡µé¢ï¼ˆåªæœ‰å±•ç¤ºï¼‰

1. åˆ›å»º `src/pages/xxx/index.vue`
2. åœ¨ `src/pages/routes.ts` æ³¨å†Œè·¯ç”±
3. âœ… å®Œæˆ

### æ·»åŠ å¤æ‚é¡µé¢ï¼ˆæœ‰æ•°æ®äº¤äº’ï¼‰

1. åˆ›å»º `src/pages/xxx/index.vue`
2. åˆ›å»º `src/pages/xxx/api.ts` - å†™æ¥å£è°ƒç”¨
3. åˆ›å»º `src/pages/xxx/composables/use-xxx.ts` - å†™ä¸šåŠ¡é€»è¾‘
4. åœ¨ `index.vue` ä¸­ä½¿ç”¨
5. åœ¨ `src/pages/routes.ts` æ³¨å†Œè·¯ç”±
6. âœ… å®Œæˆ

### æ·»åŠ æœ‰å­ç»„ä»¶çš„å¤æ‚é¡µé¢

1. åˆ›å»º `src/pages/xxx/index.vue`
2. åˆ›å»º `src/pages/xxx/api.ts`
3. åˆ›å»º `src/pages/xxx/composables/use-xxx.ts`
4. åˆ›å»º `src/pages/xxx/components/` æ–‡ä»¶å¤¹
5. åœ¨ `components/` ä¸‹åˆ›å»ºå­ç»„ä»¶
6. åœ¨ `index.vue` ä¸­å¼•ç”¨å­ç»„ä»¶
7. åœ¨ `src/pages/routes.ts` æ³¨å†Œè·¯ç”±
8. âœ… å®Œæˆ

---

## ä»£ç è§„èŒƒ

### 1. å‘½åè§„èŒƒ

- **æ–‡ä»¶å**ï¼š`kebab-case`ï¼ˆå°å†™ä¸­åˆ’çº¿ï¼‰ï¼Œå¦‚ `post-detail.vue`
- **ç»„ä»¶å**ï¼š`PascalCase`ï¼ˆå¤§é©¼å³°ï¼‰ï¼Œå¦‚ `<CommentItem />`
- **å˜é‡/å‡½æ•°**ï¼š`camelCase`ï¼ˆå°é©¼å³°ï¼‰ï¼Œå¦‚ `postId`, `loadData()`
- **å¸¸é‡**ï¼š`UPPER_SNAKE_CASE`ï¼ˆå…¨å¤§å†™ä¸‹åˆ’çº¿ï¼‰ï¼Œå¦‚ `API_BASE_URL`

### 2. å¯¼å…¥é¡ºåº

```typescript
// 1. Vue ç›¸å…³
import { ref, computed } from 'vue';
import { useRoute } from 'vue-router';

// 2. ç¬¬ä¸‰æ–¹åº“
import { ElMessage } from 'element-plus';

// 3. æœ¬åœ°å¯¼å…¥ï¼ˆå…¨å±€ï¼‰
import { apiClient } from '@/api/client';
import { useUserStore } from '@/stores/user';

// 4. æœ¬åœ°å¯¼å…¥ï¼ˆé¡µé¢çº§ï¼‰
import { getPostDetail } from './api';
import CommentItem from './components/comment-item.vue';
```

### 3. Vue ç»„ä»¶ç»“æ„

```vue
<template>
  <!-- æ¨¡æ¿ -->
</template>

<script setup lang="ts">
// 1. å¯¼å…¥
// 2. Props/Emits
// 3. å˜é‡å®šä¹‰
// 4. å‡½æ•°å®šä¹‰
// 5. ç”Ÿå‘½å‘¨æœŸ
</script>

<style scoped>
/* æ ·å¼ */
</style>
```

---

## å¸¸ç”¨å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build
```

---

## å¸¸è§é—®é¢˜

### â“ ä»€ä¹ˆæ—¶å€™åˆ›å»ºæ–°æ–‡ä»¶å¤¹ï¼Ÿ

- æ·»åŠ æ–°é¡µé¢æ—¶ï¼Œåœ¨ `src/pages/` ä¸‹åˆ›å»º
- é¡µé¢éœ€è¦ä¸“ç”¨å­ç»„ä»¶æ—¶ï¼Œåœ¨é¡µé¢å†…åˆ›å»º `components/`
- é¡µé¢é€»è¾‘å¤æ‚æ—¶ï¼Œåˆ›å»º `composables/`ã€`stores/` ç­‰

### â“ ä»£ç å†™åœ¨å“ªé‡Œï¼Ÿ

**åŸåˆ™**ï¼šä»è¿‘åˆ°è¿œ
1. åªç”¨ä¸€æ¬¡ â†’ ç›´æ¥å†™åœ¨ `index.vue` é‡Œ
2. é¡µé¢å†…å¤ç”¨ â†’ æŠ½åˆ°é¡µé¢çº§æ–‡ä»¶ï¼ˆ`api.ts`ã€`composables/` ç­‰ï¼‰
3. å¤šé¡µé¢å¤ç”¨ â†’ æŠ½åˆ°å…¨å±€æ–‡ä»¶ï¼ˆ`src/api/`ã€`src/stores/` ç­‰ï¼‰

### â“ è·¯ç”±è·¯å¾„æ€ä¹ˆå†™ï¼Ÿ

```typescript
// src/pages/routes.ts ä¸­ä¸éœ€è¦å‰å¯¼ /
{
  path: 'home',  // âœ… æ­£ç¡®
  path: '/home', // âŒ é”™è¯¯
}

// è·³è½¬æ—¶éœ€è¦å®Œæ•´è·¯å¾„
router.push('/home');  // âœ… æ­£ç¡®
```

---

## å­¦ä¹ èµ„æº

- Vue 3 å®˜æ–¹æ–‡æ¡£ï¼šhttps://cn.vuejs.org/
- Element Plus æ–‡æ¡£ï¼šhttps://element-plus.org/zh-CN/
- TypeScript å…¥é—¨ï¼šhttps://ts.xcatliu.com/

---

ç¥å¼€å‘é¡ºåˆ©ï¼ğŸ‰
